<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Gesti√≥n de Productos</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-5">
    <h2 class="text-center mb-4">üßæ Lista de Productos</h2>

    <!-- Tabla de productos -->
    <table class="table table-bordered table-hover bg-white shadow-sm align-middle">
      <thead class="table-dark text-center">
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Descripci√≥n</th>
          <th>Precio Unitario</th>
          <th>IVA</th>
          <th>Categor√≠a</th>
          <th>Editar Categor√≠a</th>
        </tr>
      </thead>
      <tbody>
        {% for p in productos %}
        <tr>
          <td class="text-center">{{ p[0] }}</td>
          <td>{{ p[1] }}</td>
          <td>{{ p[2] }}</td>
          <td>${{ "%.2f"|format(p[3]) }}</td>
          <td>{{ p[4] }}%</td>
          <td>{{ p[5] }}</td>
          <td>
            <form action="{{ url_for('editar_categoria', id_producto=p[0]) }}" method="post" class="d-flex gap-2 justify-content-center">
              <select name="id_categoria" class="form-select form-select-sm" style="width: 130px;">
                {% for c in categorias %}
                  <option value="{{ c[0] }}">{{ c[1] }}</option>
                {% endfor %}
              </select>
              <button type="submit" class="btn btn-warning btn-sm">Cambiar</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <hr class="my-5">

    <!-- Formulario para crear nuevo producto -->
    <h3 class="text-center mb-4">‚ûï Crear nuevo producto</h3>

    <div class="card shadow-sm">
      <div class="card-body">
        <form action="{{ url_for('productos') }}" method="post">
          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">Nombre</label>
              <input type="text" name="nombre" class="form-control" required>
            </div>
            <div class="col-md-6">
              <label class="form-label">Precio unitario</label>
              <input type="number" step="0.01" name="precio_unitario" class="form-control" required>
            </div>
          </div>

          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">IVA (%)</label>
              <input type="number" step="0.01" name="iva" class="form-control" required>
            </div>
            <div class="col-md-6">
              <label class="form-label">Categor√≠a</label>
              <select name="id_categoria" class="form-select" required>
                {% for c in categorias %}
                  <option value="{{ c[0] }}">{{ c[1] }}</option>
                {% endfor %}
              </select>
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label">Descripci√≥n</label>
            <textarea name="descripcion" class="form-control" rows="2"></textarea>
          </div>

          <div class="text-center">
            <button type="submit" class="btn btn-success px-4">Guardar producto</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</body>
</html>
